import { defineComponent as D, computed as q, openBlock as a, createBlock as s, unref as r, withCtx as y, createElementVNode as P, normalizeClass as m, createElementBlock as i, createVNode as v, createCommentVNode as n, withDirectives as z, normalizeStyle as A, Fragment as o, createTextVNode as O, toDisplayString as S, vShow as N, renderList as C } from "vue";
import { Disclosure as V, DisclosureButton as E, DisclosurePanel as T } from "@headlessui/vue";
import { ScalarMarkdown as $, ScalarIcon as B } from "@scalar/components";
import F from "./SchemaHeading.vue.js";
import p from "./SchemaProperty.vue.js";
const I = {
  key: 0,
  class: "schema-card-description"
}, R = /* @__PURE__ */ D({
  __name: "Schema",
  props: {
    value: { type: [Object, Boolean] },
    level: { default: 0 },
    name: {},
    compact: { type: Boolean },
    noncollapsible: { type: Boolean },
    hideHeading: { type: Boolean },
    schemas: {}
  },
  setup(j) {
    const h = j, g = q(() => !(h.noncollapsible || h.level === 0)), w = (e) => h.noncollapsible && e.stopPropagation();
    return (e, L) => typeof e.value == "object" && Object.keys(e.value).length ? (a(), s(r(V), {
      key: 0,
      defaultOpen: e.noncollapsible
    }, {
      default: y(({ open: t }) => {
        var k;
        return [
          P("div", {
            class: m(["schema-card", [
              `schema-card--level-${e.level}`,
              { "schema-card--compact": e.compact, "schema-card--open": t }
            ]])
          }, [
            (k = e.value) != null && k.description && typeof e.value.description == "string" && !e.value.allOf && !e.value.oneOf && !e.value.anyOf && !e.compact ? (a(), i("div", I, [
              v(r($), {
                value: e.value.description
              }, null, 8, ["value"])
            ])) : n("", !0),
            P("div", {
              class: m(["schema-properties", {
                "schema-properties-open": t
              }])
            }, [
              z(v(r(E), {
                as: e.noncollapsible ? "div" : "button",
                class: m(["schema-card-title", { "schema-card-title--compact": e.compact }]),
                style: A({
                  top: `calc(var(--refs-header-height) +  calc(var(--schema-title-height) * ${e.level}))`
                }),
                onClickCapture: w
              }, {
                default: y(() => {
                  var d, u, l;
                  return [
                    e.compact ? (a(), i(o, { key: 0 }, [
                      g.value ? (a(), s(r(B), {
                        key: 0,
                        class: m(["schema-card-title-icon", { "schema-card-title-icon--open": t }]),
                        icon: "Add",
                        size: "sm"
                      }, null, 8, ["class"])) : n("", !0),
                      t ? (a(), i(o, { key: 1 }, [
                        O(" Hide " + S(((d = e.value) == null ? void 0 : d.title) ?? "Child Attributes"), 1)
                      ], 64)) : (a(), i(o, { key: 2 }, [
                        O(" Show " + S(((u = e.value) == null ? void 0 : u.title) ?? "Child Attributes"), 1)
                      ], 64))
                    ], 64)) : (a(), i(o, { key: 1 }, [
                      g.value ? (a(), s(r(B), {
                        key: 0,
                        class: m(["schema-card-title-icon", { "schema-card-title-icon--open": t }]),
                        icon: "Add",
                        size: "sm"
                      }, null, 8, ["class"])) : n("", !0),
                      v(F, {
                        name: ((l = e.value) == null ? void 0 : l.title) ?? e.name,
                        value: e.value
                      }, null, 8, ["name", "value"])
                    ], 64))
                  ];
                }),
                _: 2
              }, 1032, ["as", "class", "style"]), [
                [N, !e.hideHeading && !(e.noncollapsible && e.compact)]
              ]),
              v(r(T), {
                as: "ul",
                static: e.noncollapsible
              }, {
                default: y(() => {
                  var d, u;
                  return [
                    e.value.properties || e.value.additionalProperties || e.value.patternProperties ? (a(), i(o, { key: 0 }, [
                      e.value.properties ? (a(!0), i(o, { key: 0 }, C(Object.keys((d = e.value) == null ? void 0 : d.properties), (l) => {
                        var c, f, b, H;
                        return a(), s(p, {
                          key: l,
                          compact: e.compact,
                          hideHeading: e.hideHeading,
                          level: e.level + 1,
                          name: l,
                          required: ((c = e.value.required) == null ? void 0 : c.includes(l)) || ((b = (f = e.value.properties) == null ? void 0 : f[l]) == null ? void 0 : b.required) === !0,
                          schemas: e.schemas,
                          value: (H = e.value.properties) == null ? void 0 : H[l]
                        }, null, 8, ["compact", "hideHeading", "level", "name", "required", "schemas", "value"]);
                      }), 128)) : n("", !0),
                      e.value.patternProperties ? (a(!0), i(o, { key: 1 }, C(Object.keys((u = e.value) == null ? void 0 : u.patternProperties), (l) => {
                        var c;
                        return a(), s(p, {
                          key: l,
                          compact: e.compact,
                          hideHeading: e.hideHeading,
                          level: e.level,
                          name: l,
                          pattern: "",
                          schemas: e.schemas,
                          value: (c = e.value.patternProperties) == null ? void 0 : c[l]
                        }, null, 8, ["compact", "hideHeading", "level", "name", "schemas", "value"]);
                      }), 128)) : n("", !0),
                      e.value.additionalProperties ? (a(), i(o, { key: 2 }, [
                        e.value.additionalProperties === !0 || Object.keys(e.value.additionalProperties).length === 0 || !e.value.additionalProperties.type ? (a(), s(p, {
                          key: 0,
                          additional: "",
                          compact: e.compact,
                          hideHeading: e.hideHeading,
                          level: e.level,
                          noncollapsible: "",
                          schemas: e.schemas,
                          value: {
                            type: "anything",
                            ...typeof e.value.additionalProperties == "object" ? e.value.additionalProperties : {}
                          }
                        }, null, 8, ["compact", "hideHeading", "level", "schemas", "value"])) : (a(), s(p, {
                          key: 1,
                          additional: "",
                          compact: e.compact,
                          hideHeading: e.hideHeading,
                          level: e.level,
                          noncollapsible: "",
                          schemas: e.schemas,
                          value: e.value.additionalProperties
                        }, null, 8, ["compact", "hideHeading", "level", "schemas", "value"]))
                      ], 64)) : n("", !0)
                    ], 64)) : (a(), s(p, {
                      key: 1,
                      compact: e.compact,
                      hideHeading: e.hideHeading,
                      name: e.value.name,
                      schemas: e.schemas,
                      value: e.value
                    }, null, 8, ["compact", "hideHeading", "name", "schemas", "value"]))
                  ];
                }),
                _: 1
              }, 8, ["static"])
            ], 2)
          ], 2)
        ];
      }),
      _: 1
    }, 8, ["defaultOpen"])) : n("", !0);
  }
});
export {
  R as default
};
