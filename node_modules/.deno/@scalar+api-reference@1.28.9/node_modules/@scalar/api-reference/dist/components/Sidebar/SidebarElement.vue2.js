import { defineComponent as $, openBlock as n, createElementBlock as d, createElementVNode as a, normalizeClass as A, unref as m, withModifiers as T, createVNode as b, withCtx as V, createTextVNode as h, toDisplayString as c, createCommentVNode as s, createBlock as E, renderSlot as v } from "vue";
import { ScalarSidebarGroupToggle as N, ScalarIcon as O } from "@scalar/components";
import { combineUrlAndPath as R } from "@scalar/oas-utils/helpers";
import { useConfig as U } from "../../hooks/useConfig.js";
import H from "./SidebarHttpBadge.vue.js";
import { sleep as C } from "../../helpers/sleep.js";
import { useNavState as I } from "../../hooks/useNavState.js";
import { scrollToId as P } from "../../helpers/scrollToId.js";
const D = ["id"], L = {
  key: 0,
  class: "sidebar-heading-chevron"
}, M = ["aria-expanded"], z = ["href", "tabindex"], F = { class: "sidebar-heading-link-title" }, G = {
  key: 1,
  class: "sidebar-heading-link-method"
}, j = {
  key: 1,
  class: "action-menu"
}, _ = /* @__PURE__ */ $({
  __name: "SidebarElement",
  props: {
    id: {},
    item: {},
    isActive: { type: Boolean },
    hasChildren: { type: Boolean },
    open: { type: Boolean }
  },
  emits: ["toggleOpen"],
  setup(k, { emit: y }) {
    const i = k, p = y, { getFullHash: u, isIntersectionEnabled: r, replaceUrlState: w } = I(), l = U(), f = async () => {
      var e, t;
      r.value = !1, i.hasChildren && p("toggleOpen"), (t = (e = i.item) == null ? void 0 : e.select) == null || t.call(e), await C(100), r.value = !0;
    }, S = () => {
      if (l.value.pathRouting)
        return R(l.value.pathRouting.basePath, i.item.id);
      if (typeof window < "u") {
        const e = new URL(window.location.href);
        return e.hash = u(i.item.id), `${e.pathname}${e.search}${e.hash}`;
      }
      return `#${u(i.item.id)}`;
    }, B = async (e) => {
      var t, o;
      l.value.pathRouting && (e.preventDefault(), i.hasChildren && p("toggleOpen"), (o = (t = i.item) == null ? void 0 : t.select) == null || o.call(t), p("toggleOpen"), r.value = !1, w(i.item.id), P(i.item.id), await C(100), r.value = !0);
    };
    return (e, t) => {
      var o, g;
      return n(), d("li", {
        id: e.id,
        class: "sidebar-group-item"
      }, [
        a("div", {
          class: A(["sidebar-heading", {
            "sidebar-group-item__folder": e.hasChildren,
            active_page: e.isActive,
            deprecated: e.item.deprecated ?? !1
          }]),
          onClick: f
        }, [
          e.hasChildren && !m(l).defaultOpenAllTags ? (n(), d("p", L, [
            a("button", {
              "aria-expanded": e.open,
              class: "toggle-nested-icon",
              type: "button",
              onClick: T(f, ["stop"])
            }, [
              b(m(N), { open: e.open }, {
                label: V(() => [
                  h(c(e.open ? "Collapse" : "Expand") + " " + c(e.item.title), 1)
                ]),
                _: 1
              }, 8, ["open"])
            ], 8, M),
            t[0] || (t[0] = h("   "))
          ])) : s("", !0),
          a("a", {
            class: "sidebar-heading-link",
            href: S(),
            tabindex: e.hasChildren ? -1 : 0,
            onClick: B
          }, [
            (g = (o = e.item) == null ? void 0 : o.icon) != null && g.src ? (n(), E(m(O), {
              key: 0,
              class: "sidebar-icon",
              icon: e.item.icon.src
            }, null, 8, ["icon"])) : s("", !0),
            a("p", F, c(e.item.title), 1),
            e.item.httpVerb && !e.hasChildren ? (n(), d("p", G, [
              t[1] || (t[1] = h("   ")),
              t[2] || (t[2] = a("span", { class: "sr-only" }, "HTTP Method: ", -1)),
              b(H, {
                active: e.isActive,
                method: e.item.httpVerb
              }, null, 8, ["active", "method"])
            ])) : s("", !0)
          ], 8, z)
        ], 2),
        e.open ? v(e.$slots, "default", { key: 0 }, void 0, !0) : s("", !0),
        e.$slots["action-menu"] ? (n(), d("div", j, [
          v(e.$slots, "action-menu", {}, void 0, !0)
        ])) : s("", !0)
      ], 8, D);
    };
  }
});
export {
  _ as default
};
