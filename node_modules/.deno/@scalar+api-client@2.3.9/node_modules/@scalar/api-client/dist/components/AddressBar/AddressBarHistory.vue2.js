import { defineComponent as _, computed as y, openBlock as a, createBlock as i, unref as e, withCtx as o, createVNode as l, createSlots as S, createElementVNode as r, createCommentVNode as h, normalizeStyle as b, createElementBlock as M, Fragment as B, renderList as H, toDisplayString as c, normalizeClass as w } from "vue";
import { Menu as z, MenuButton as I, MenuItems as E, MenuItem as F } from "@headlessui/vue";
import { ScalarFloating as N, ScalarIcon as U, ScalarFloatingBackdrop as V } from "@scalar/components";
import { httpStatusCodes as R } from "@scalar/oas-utils/helpers";
import { useRouter as W } from "vue-router";
import { formatMs as A } from "../../libs/formatters.js";
import { PathId as g } from "../../routes.js";
import D from "../HttpMethod/HttpMethod.vue.js";
import { getStatusCodeColor as L } from "./httpStatusCodeColors.js";
import { useWorkspace as P } from "../../store/store.js";
const $ = { class: "min-w-0" }, j = { class: "text-c-1 min-w-0 truncate" }, te = /* @__PURE__ */ _({
  __name: "AddressBarHistory",
  props: {
    operation: {},
    target: {}
  },
  setup(m) {
    const { requestHistory: k, requestExampleMutators: v } = P(), p = W(), f = y(
      () => k.filter((s) => s.request.requestUid === m.operation.uid).slice().reverse()
    );
    function x(s) {
      const n = p.currentRoute.value.params.workspace;
      m.operation.uid !== s.request.requestUid && p.push({
        name: "request",
        params: {
          [g.Workspace]: n,
          [g.Request]: s.request.requestUid
        }
      }), v.set({ ...s.request });
    }
    return (s, n) => (a(), i(e(z), { as: "div" }, {
      default: o(({ open: q }) => [
        l(e(N), {
          offset: 0,
          resize: "",
          target: s.target
        }, S({
          default: o(() => {
            var u;
            return [
              (u = f.value) != null && u.length ? (a(), i(e(I), {
                key: 0,
                class: "address-bar-history-button z-context-plus text-c-3 focus:text-c-1 relative mr-1 rounded-lg p-1.5"
              }, {
                default: o(() => [
                  l(e(U), {
                    icon: "History",
                    size: "sm",
                    thickness: "2.25"
                  }),
                  n[0] || (n[0] = r("span", { class: "sr-only" }, "Request History", -1))
                ]),
                _: 1
              })) : h("", !0)
            ];
          }),
          _: 2
        }, [
          q ? {
            name: "floating",
            fn: o(({ width: u }) => [
              l(e(E), {
                class: "custom-scroll p-0.75 grid max-h-[inherit] grid-cols-[44px,1fr,repeat(3,auto)] items-center border-t",
                static: "",
                style: b({ width: u })
              }, {
                default: o(() => [
                  (a(!0), M(B, null, H(f.value, (t, C) => (a(), i(e(F), {
                    key: t.timestamp,
                    as: "button",
                    class: "font-code *:ui-active:bg-b-2 text-c-2 contents text-sm font-medium *:flex *:h-8 *:cursor-pointer *:items-center *:rounded-none *:px-1.5 first:*:rounded-l last:*:rounded-r",
                    value: C,
                    onClick: (d) => x(t)
                  }, {
                    default: o(() => {
                      var d;
                      return [
                        t.response.method ? (a(), i(D, {
                          key: 0,
                          class: "text-[11px]",
                          method: t.response.method
                        }, null, 8, ["method"])) : h("", !0),
                        r("div", $, [
                          r("div", j, c(t.response.path), 1)
                        ]),
                        r("div", null, c(e(A)(t.response.duration)), 1),
                        r("div", {
                          class: w([e(L)(t.response.status).color])
                        }, c(t.response.status), 3),
                        r("div", null, c((d = e(R)[t.response.status]) == null ? void 0 : d.name), 1)
                      ];
                    }),
                    _: 2
                  }, 1032, ["value", "onClick"]))), 128))
                ]),
                _: 2
              }, 1032, ["style"]),
              l(e(V), { class: "-top-[--scalar-address-bar-height] rounded-lg" })
            ]),
            key: "0"
          } : void 0
        ]), 1032, ["target"])
      ]),
      _: 1
    }));
  }
});
export {
  te as default
};
