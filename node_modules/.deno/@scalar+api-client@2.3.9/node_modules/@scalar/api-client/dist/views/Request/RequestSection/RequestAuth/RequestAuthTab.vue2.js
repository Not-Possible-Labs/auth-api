import { defineComponent as F, computed as N, ref as P, openBlock as a, createElementBlock as n, Fragment as p, renderList as U, createBlock as x, unref as d, normalizeClass as C, withCtx as l, createVNode as u, createTextVNode as y, toDisplayString as m, createCommentVNode as v, mergeProps as V, createElementVNode as T, capitalize as _ } from "vue";
import { useWorkspace as j } from "../../../../store/store.js";
import q from "./OAuth2.vue.js";
import w from "./RequestAuthDataTableInput.vue.js";
import s from "../../../../components/DataTable/DataTableRow.vue.js";
import S from "../../../../components/DataTable/DataTableCell.vue.js";
const R = {
  key: 0,
  class: "flex min-h-8 border-t text-sm"
}, z = { class: "flex h-8 max-w-full gap-2.5 overflow-x-auto px-3" }, L = ["onClick"], M = { class: "relative z-10" }, Q = {
  key: 5,
  class: "text-c-3 bg-b-1 flex min-h-16 items-center justify-center border-t px-4 text-sm"
}, J = /* @__PURE__ */ F({
  __name: "RequestAuthTab",
  props: {
    collection: {},
    environment: {},
    envVariables: {},
    layout: {},
    securitySchemeUids: {},
    server: {},
    workspace: {}
  },
  setup(c) {
    const { securitySchemes: B, securitySchemeMutators: I } = j(), g = N(
      () => c.securitySchemeUids.map((t) => ({
        scheme: B[t]
      }))
    ), i = P(""), K = (t) => {
      const r = t.description ? `: ${t.description}` : "", e = `${_(t.nameKey)}${r || `: ${t.type}`}`;
      if (t.type === "apiKey")
        return `${_(t.nameKey)}${r || `: ${t.in}`}`;
      if (t.type === "oauth2") {
        const o = Object.values(t.flows ?? {})[0];
        return `${_(t.nameKey)}: ${i.value ? i.value : (o == null ? void 0 : o.type) ?? ""}${r}`;
      }
      return t.type === "http" ? `${_(t.nameKey)}: ${t.scheme}${r}` : `${e}${r}`;
    }, k = (t, r, e) => I.edit(t, r, e), b = {
      environment: c.environment,
      envVariables: c.envVariables,
      workspace: c.workspace
    };
    return (t, r) => (a(!0), n(p, null, U(g.value, ({ scheme: e }) => (a(), n(p, {
      key: e == null ? void 0 : e.uid
    }, [
      g.value.length > 1 ? (a(), x(d(s), {
        key: 0,
        class: C({
          "request-example-references-header": t.layout === "reference"
        })
      }, {
        default: l(() => [
          u(d(S), {
            class: C(["auth-bg-description text-c-2 flex items-center pl-3", t.layout === "reference" && "border-b"])
          }, {
            default: l(() => [
              y(m(K(e)), 1)
            ]),
            _: 2
          }, 1032, ["class"])
        ]),
        _: 2
      }, 1032, ["class"])) : v("", !0),
      e != null && e.description && g.value.length <= 1 ? (a(), x(d(s), { key: 1 }, {
        default: l(() => [
          u(d(S), { class: "auth-bg-description text-c-2 flex items-center overflow-auto whitespace-nowrap pl-3" }, {
            default: l(() => [
              y(m(e.description), 1)
            ]),
            _: 2
          }, 1024)
        ]),
        _: 2
      }, 1024)) : v("", !0),
      (e == null ? void 0 : e.type) === "http" ? (a(), n(p, { key: 2 }, [
        e.scheme === "bearer" ? (a(), x(d(s), { key: 0 }, {
          default: l(() => [
            u(w, V({ ref_for: !0 }, b, {
              containerClass: t.layout === "reference" && "border-t",
              modelValue: e.token,
              placeholder: "Token",
              type: "password",
              "onUpdate:modelValue": (o) => k(e.uid, "token", o)
            }), {
              default: l(() => r[0] || (r[0] = [
                y(" Bearer Token ")
              ])),
              _: 2
            }, 1040, ["containerClass", "modelValue", "onUpdate:modelValue"])
          ]),
          _: 2
        }, 1024)) : (e == null ? void 0 : e.scheme) === "basic" ? (a(), n(p, { key: 1 }, [
          u(d(s), null, {
            default: l(() => [
              u(w, V({ ref_for: !0 }, b, {
                class: "text-c-2",
                containerClass: t.layout === "reference" && "auth-blend-required border-t",
                modelValue: e.username,
                placeholder: "janedoe",
                required: "",
                "onUpdate:modelValue": (o) => k(e.uid, "username", o)
              }), {
                default: l(() => r[1] || (r[1] = [
                  y(" Username ")
                ])),
                _: 2
              }, 1040, ["containerClass", "modelValue", "onUpdate:modelValue"])
            ]),
            _: 2
          }, 1024),
          u(d(s), null, {
            default: l(() => [
              u(w, V({ ref_for: !0 }, b, {
                modelValue: e.password,
                placeholder: "********",
                type: "password",
                "onUpdate:modelValue": (o) => k(e.uid, "password", o)
              }), {
                default: l(() => r[2] || (r[2] = [
                  y(" Password ")
                ])),
                _: 2
              }, 1040, ["modelValue", "onUpdate:modelValue"])
            ]),
            _: 2
          }, 1024)
        ], 64)) : v("", !0)
      ], 64)) : (e == null ? void 0 : e.type) === "apiKey" ? (a(), n(p, { key: 3 }, [
        u(d(s), null, {
          default: l(() => [
            u(w, V({ ref_for: !0 }, b, {
              containerClass: t.layout === "reference" && "border-t",
              modelValue: e.name,
              placeholder: "api-key",
              "onUpdate:modelValue": (o) => k(e.uid, "name", o)
            }), {
              default: l(() => r[3] || (r[3] = [
                y(" Name ")
              ])),
              _: 2
            }, 1040, ["containerClass", "modelValue", "onUpdate:modelValue"])
          ]),
          _: 2
        }, 1024),
        u(d(s), null, {
          default: l(() => [
            u(w, V({ ref_for: !0 }, b, {
              modelValue: e.value,
              placeholder: "QUxMIFlPVVIgQkFTRSBBUkUgQkVMT05HIFRPIFVT",
              "onUpdate:modelValue": (o) => k(e.uid, "value", o)
            }), {
              default: l(() => r[4] || (r[4] = [
                y(" Value ")
              ])),
              _: 2
            }, 1040, ["modelValue", "onUpdate:modelValue"])
          ]),
          _: 2
        }, 1024)
      ], 64)) : (e == null ? void 0 : e.type) === "oauth2" ? (a(), n(p, { key: 4 }, [
        u(d(s), null, {
          default: l(() => [
            Object.keys(e.flows).length > 1 ? (a(), n("div", R, [
              T("div", z, [
                (a(!0), n(p, null, U(e == null ? void 0 : e.flows, (o, f, $) => (a(), n("button", {
                  key: f,
                  class: C(["floating-bg text-c-3 relative cursor-pointer border-b-[1px] border-transparent py-1 text-sm font-medium", {
                    "!text-c-1 !rounded-none border-b-[1px] !border-current": t.layout !== "reference" && (i.value === f || $ === 0 && !i.value),
                    "!text-c-1 !rounded-none border-b-[1px] !border-current opacity-100": t.layout === "reference" && (i.value === f || $ === 0 && !i.value)
                  }]),
                  type: "button",
                  onClick: (D) => i.value = f
                }, [
                  T("span", M, m(f), 1)
                ], 10, L))), 128))
              ])
            ])) : v("", !0)
          ]),
          _: 2
        }, 1024),
        (a(!0), n(p, null, U(e == null ? void 0 : e.flows, (o, f, $) => (a(), n(p, { key: f }, [
          i.value === f || $ === 0 && !i.value ? (a(), x(q, V({
            key: 0,
            ref_for: !0
          }, b, {
            collection: t.collection,
            flow: o,
            scheme: e,
            server: t.server,
            workspace: t.workspace
          }), null, 16, ["collection", "flow", "scheme", "server", "workspace"])) : v("", !0)
        ], 64))), 128))
      ], 64)) : (e == null ? void 0 : e.type) === "openIdConnect" ? (a(), n("div", Q, " Coming soon ")) : v("", !0)
    ], 64))), 128));
  }
});
export {
  J as default
};
