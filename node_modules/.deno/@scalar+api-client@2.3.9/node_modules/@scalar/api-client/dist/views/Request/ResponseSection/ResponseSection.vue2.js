import { defineComponent as j, computed as c, ref as T, useId as g, openBlock as n, createBlock as i, withCtx as v, createElementVNode as d, normalizeClass as y, createCommentVNode as u, createVNode as h, createElementBlock as k, Fragment as A } from "vue";
import I from "../../../components/SectionFilter.vue.js";
import V from "../../../components/ViewLayout/ViewLayoutSection.vue.js";
import H from "./ResponseBody.vue.js";
import q from "./ResponseEmpty.vue.js";
import E from "./ResponseLoadingOverlay.vue.js";
import O from "./ResponseMetaInformation.vue.js";
import $ from "./ResponseBodyVirtual.vue.js";
/* empty css                         */
import w from "./ResponseCookies.vue.js";
import z from "./ResponseHeaders.vue.js";
const L = { class: "flex h-8 flex-1 items-center" }, N = ["id", "role"], b = 2e5, J = /* @__PURE__ */ j({
  __name: "ResponseSection",
  props: {
    numWorkspaceRequests: {},
    response: {}
  },
  setup(t) {
    const m = c(() => {
      var a;
      const e = (a = t.response) == null ? void 0 : a.headers;
      return e ? Object.keys(e).map((o) => ({
        name: o,
        value: e[o] ?? "",
        required: !1
      })).filter(
        (o) => ![
          "rest-api-client-content-length",
          "X-API-Client-Content-Length"
        ].includes(o.name)
      ) : [];
    }), x = c(
      () => {
        var e;
        return ((e = t.response) == null ? void 0 : e.cookieHeaderKeys.flatMap((a) => {
          var l, r;
          const o = (r = (l = t.response) == null ? void 0 : l.headers) == null ? void 0 : r[a];
          return o ? {
            name: a,
            value: o,
            required: !1
          } : [];
        })) ?? [];
      }
    ), B = ["Cookies", "Headers", "Body"], s = T("All"), f = c(() => ["All", ...B]), p = c(
      () => Object.fromEntries(
        f.value.map((e) => [e, g()])
      )
    ), R = c(() => {
      var l, r;
      if (!t.response)
        return !1;
      const e = ((l = t.response.headers) == null ? void 0 : l["content-type"]) || ((r = t.response.headers) == null ? void 0 : r["Content-Type"]);
      return !e || (t.response.size ?? 0) <= b || e.includes("text/html") ? !1 : [
        // Text types
        "text/",
        // JSON types
        "application/json",
        "application/ld+json",
        "application/problem+json",
        "application/vnd.api+json",
        // XML types
        "application/xml",
        "application/atom+xml",
        "application/rss+xml",
        "application/problem+xml",
        // Other structured text
        "application/javascript",
        "application/ecmascript",
        "application/x-yaml",
        "application/yaml",
        // Source code
        "application/x-httpd-php",
        "application/x-sh",
        "application/x-perl",
        "application/x-python",
        "application/x-ruby",
        "application/x-java-source",
        // Form data
        "application/x-www-form-urlencoded"
      ].some((C) => e.includes(C)) && (t.response.size ?? 0) > b;
    });
    return (e, a) => (n(), i(V, { "aria-label": "Response" }, {
      title: v(() => [
        d("div", L, [
          d("div", {
            "aria-live": "polite",
            class: y(["flex items-center", { "animate-response-heading": e.response }])
          }, [
            a[1] || (a[1] = d("span", { class: "response-heading pointer-events-none absolute" }, " Response ", -1)),
            e.response ? (n(), i(O, {
              key: 0,
              class: "animate-response-children",
              response: e.response
            }, null, 8, ["response"])) : u("", !0)
          ], 2),
          h(I, {
            modelValue: s.value,
            "onUpdate:modelValue": a[0] || (a[0] = (o) => s.value = o),
            filterIds: p.value,
            filters: f.value
          }, null, 8, ["modelValue", "filterIds", "filters"])
        ])
      ]),
      default: v(() => {
        var o, l, r;
        return [
          d("div", {
            id: p.value.All,
            class: y(["custom-scroll response-section-content relative grid h-full justify-stretch", {
              "content-start": e.response
            }]),
            role: s.value === "All" && e.response ? "tabpanel" : "none"
          }, [
            e.response ? (n(), k(A, { key: 1 }, [
              s.value === "All" || s.value === "Cookies" ? (n(), i(w, {
                key: 0,
                class: "response-section-content-cookies",
                id: p.value.Cookies,
                cookies: x.value,
                role: s.value === "All" ? "none" : "tabpanel"
              }, null, 8, ["id", "cookies", "role"])) : u("", !0),
              s.value === "All" || s.value === "Headers" ? (n(), i(z, {
                key: 1,
                class: "response-section-content-headers",
                id: p.value.Headers,
                headers: m.value,
                role: s.value === "All" ? "none" : "tabpanel"
              }, null, 8, ["id", "headers", "role"])) : u("", !0),
              s.value === "All" || s.value === "Body" ? (n(), k(A, { key: 2 }, [
                R.value && typeof ((o = e.response) == null ? void 0 : o.data) == "string" ? (n(), i($, {
                  key: 0,
                  id: p.value.Body,
                  content: e.response.data,
                  data: (l = e.response) == null ? void 0 : l.data,
                  headers: m.value,
                  role: s.value === "All" ? "none" : "tabpanel"
                }, null, 8, ["id", "content", "data", "headers", "role"])) : (n(), i(H, {
                  key: 1,
                  class: "response-section-content-body",
                  id: p.value.Body,
                  active: !0,
                  data: (r = e.response) == null ? void 0 : r.data,
                  headers: m.value,
                  role: s.value === "All" ? "none" : "tabpanel",
                  title: "Body"
                }, null, 8, ["id", "data", "headers", "role"]))
              ], 64)) : u("", !0)
            ], 64)) : (n(), i(q, {
              key: 0,
              numWorkspaceRequests: e.numWorkspaceRequests
            }, null, 8, ["numWorkspaceRequests"])),
            h(E)
          ], 10, N)
        ];
      }),
      _: 1
    }));
  }
});
export {
  J as default
};
